# –°—Ç–∞—Ç—É—Å API Gateway

## ‚úÖ –°–æ–∑–¥–∞–Ω API Gateway

- **–ò–º—è:** `dating-app-api`
- **ID:** `d5dc4655gjtafu92k0od`
- **URL:** `https://d5dc4655gjtafu92k0od.yl4tuxdu.apigw.yandexcloud.net`
- **–°—Ç–∞—Ç—É—Å:** ACTIVE

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway

–ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ Gateway —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 502:
```json
{"message":"request to function 'd4enks8erf8eentnojj9' failed, reason: Response code 502 (Bad Gateway)"}
```

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **–§—É–Ω–∫—Ü–∏—è –Ω–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞** - —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –∏–ª–∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞** - —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–µ—Ç API Gateway
3. **Timeout** - —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –∑–∞ –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è
4. **–û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ —Ñ—É–Ω–∫—Ü–∏–∏** - —Ñ—É–Ω–∫—Ü–∏—è –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

## üîß –†–µ—à–µ–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ñ—É–Ω–∫—Ü–∏–∏

```bash
yc serverless function get --id d4enks8erf8eentnojj9
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏

```bash
yc serverless function logs --id d4enks8erf8eentnojj9 --limit 50
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞

```bash
yc serverless function list-versions --id d4enks8erf8eentnojj9
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å handler

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π handler:
- Entrypoint: `dist/handler.handler`
- –§–∞–π–ª –¥–æ–ª–∂–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `handler`

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```javascript
{
  statusCode: 200,
  headers: { ... },
  body: JSON.stringify({ ... })
}
```

## üìù –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### API Gateway Spec

–§–∞–π–ª: `api-gateway-spec.yaml`

- –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã (`/{proxy+}`) –∫ —Ñ—É–Ω–∫—Ü–∏–∏ `d4enks8erf8eentnojj9`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç service account `aje0defcl8b2577p01hg`

### –ê–¥–º–∏–Ω–∫–∞

- URL: `https://lug-admin-deploy.website.yandexcloud.net/`
- Backend URL –≤ config.js: `https://d5dc4655gjtafu92k0od.yl4tuxdu.apigw.yandexcloud.net`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Yandex API Gateway](https://cloud.yandex.ru/docs/api-gateway/)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ API Gateway](https://cloud.yandex.ru/docs/api-gateway/concepts/errors)

