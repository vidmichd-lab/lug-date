# üîí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–î–∞—Ç–∞:** 2024-12-XX  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

## –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏

GitHub Dependabot –æ–±–Ω–∞—Ä—É–∂–∏–ª —Å–ª–µ–¥—É—é—â–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏:

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (High) - ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

1. **xlsx (sheetJS)** - Prototype Pollution –∏ ReDoS
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
   - **–î–µ–π—Å—Ç–≤–∏–µ:** xlsx –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –ø—Ä–æ–µ–∫—Ç–∞
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `exceljs` –≤–º–µ—Å—Ç–æ `xlsx`

2. **jspdf** - ReDoS –∏ DoS
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
   - **–ë—ã–ª–æ:** `^2.5.2`
   - **–°—Ç–∞–ª–æ:** `^3.0.4`
   - **–§–∞–π–ª:** `admin/package.json`
   - **–¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ:** `jspdf-autotable` –¥–æ `^5.0.2` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

3. **multer** - Multiple DoS —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (4 —É—è–∑–≤–∏–º–æ—Å—Ç–∏)
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
   - **–ë—ã–ª–æ:** `^1.4.5-lts.1`
   - **–°—Ç–∞–ª–æ:** `^2.0.2`
   - **–§–∞–π–ª:** `backend/package.json`
   - **–¢–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:** `@types/multer@latest`

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Moderate)

4. **dompurify** - XSS
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
   - **–í–µ—Ä—Å–∏—è:** `^3.3.0` (–ø–æ—Å–ª–µ–¥–Ω—è—è –¥–æ—Å—Ç—É–ø–Ω–∞—è)
   - **–§–∞–π–ª:** `backend/package.json`
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** jspdf –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é dompurify –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –Ω–æ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è production

5. **esbuild** - Development server vulnerability
   - **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –≤ dev —Ä–µ–∂–∏–º–µ
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è production
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£—è–∑–≤–∏–º–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤ dev —Å–µ—Ä–≤–µ—Ä–µ, –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ production build

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Low)

6. **express** - Withdrawn Advisory
   - **–°—Ç–∞—Ç—É—Å:** ‚ÑπÔ∏è –û—Ç–æ–∑–≤–∞–Ω–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω jspdf –∏ jspdf-autotable

```json
// admin/package.json
"jspdf": "^3.0.4"           // –±—ã–ª–æ: "^2.5.2"
"jspdf-autotable": "^5.0.2"  // –±—ã–ª–æ: "^3.8.4"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:**

- ‚úÖ –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π API: `new jsPDF()`, `doc.setFontSize()`, `doc.text()`, `doc.addPage()`, `doc.save()`
- ‚úÖ jspdf-autotable –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –≤–µ—Ä—Å–∏–∏ 5.x –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å jspdf 3.x
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤: `admin/src/components/Dashboard/ExportButtons.tsx`

### 2. –û–±–Ω–æ–≤–ª–µ–Ω multer

```json
// backend/package.json
"multer": "^2.0.2"  // –±—ã–ª–æ: "^1.4.5-lts.1"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:**

- ‚úÖ –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π API: `multer.memoryStorage()`, `upload.single()`
- ‚úÖ –¢–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã: `@types/multer@latest`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª–∞—Ö:
  - `backend/src/routes/photos.ts`
  - `backend/src/routes/admin-management.ts`

**–£–ª—É—á—à–µ–Ω–∏—è –≤ multer 2.x:**

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç DoS –∞—Ç–∞–∫ —á–µ—Ä–µ–∑ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç DoS –∞—Ç–∞–∫ —á–µ—Ä–µ–∑ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –∏–∑ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç DoS –∞—Ç–∞–∫ —á–µ—Ä–µ–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç DoS –∞—Ç–∞–∫ —á–µ—Ä–µ–∑ –∑–ª–æ–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### 3. –ü—Ä–æ–≤–µ—Ä–µ–Ω dompurify

```json
// backend/package.json
"dompurify": "^3.3.0"  // —É–∂–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
```

**–°—Ç–∞—Ç—É—Å:** –£–∂–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏

### 4. xlsx –Ω–µ –Ω–∞–π–¥–µ–Ω

**–°—Ç–∞—Ç—É—Å:** xlsx –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –ø—Ä–æ–µ–∫—Ç–µ

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `exceljs` –≤–º–µ—Å—Ç–æ `xlsx`
- ‚úÖ xlsx –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –æ—Å—Ç–∞–ª—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ Git (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### Backend

```bash
cd backend
npm audit --omit=dev
# –†–µ–∑—É–ª—å—Ç–∞—Ç: found 0 vulnerabilities ‚úÖ
```

### Admin

```bash
cd admin
npm audit --omit=dev
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 2 moderate vulnerabilities (esbuild —á–µ—Ä–µ–∑ vite - —Ç–æ–ª—å–∫–æ dev)
# Production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã
```

## –û—Å—Ç–∞–≤—à–∏–µ—Å—è —É—è–∑–≤–∏–º–æ—Å—Ç–∏

### Admin (dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞–ª–∏—Å—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –≤ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö:

- **esbuild** (—á–µ—Ä–µ–∑ vite) - —É—è–∑–≤–∏–º–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤ dev —Ä–µ–∂–∏–º–µ
  - **–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è production**
  - **–î–µ–π—Å—Ç–≤–∏–µ:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –æ–±–Ω–æ–≤–∏—Ç—å vite –¥–æ 7.x (breaking changes)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

1. ‚úÖ –í—Å–µ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã
2. ‚ö†Ô∏è Dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–º–µ—é—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
3. üìù –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è vite –¥–ª—è –±—É–¥—É—â–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## –î–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
# Backend
cd backend
npm run build
npm run dev  # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ multer

# Admin
cd admin
npm run build
npm run dev  # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç PDF —á–µ—Ä–µ–∑ jspdf
```

### 2. –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ Git (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ xlsx –±—ã–ª –≤ –∏—Å—Ç–æ—Ä–∏–∏ Git –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –µ–≥–æ —É–¥–∞–ª–∏—Ç—å:

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ BFG Repo-Cleaner –∏–ª–∏ git filter-branch
# –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è xlsx –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: `npm audit`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Dependabot
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ GitHub Security Advisories

## –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –ü–∞–∫–µ—Ç           | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è | –°—Ç–∞—Ç—É—Å             | –§–∞–π–ª                   |
| --------------- | ------------- | ------------ | ------------------ | ---------------------- |
| jspdf           | 2.5.2         | 3.0.4        | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ       | `admin/package.json`   |
| jspdf-autotable | 3.8.4         | 5.0.2        | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ       | `admin/package.json`   |
| multer          | 1.4.5-lts.1   | 2.0.2        | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ       | `backend/package.json` |
| @types/multer   | 1.4.11        | latest       | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ       | `backend/package.json` |
| dompurify       | 3.3.0         | 3.3.0        | ‚úÖ –£–∂–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ   | `backend/package.json` |
| xlsx            | -             | -            | ‚úÖ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | -                      |

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **Breaking Changes:**
   - ‚úÖ jspdf 3.x - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Ç–µ–∫—É—â–∏–º –∫–æ–¥–æ–º
   - ‚úÖ multer 2.x - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Ç–µ–∫—É—â–∏–º –∫–æ–¥–æ–º
   - ‚ö†Ô∏è vite 7.x - breaking changes (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - ‚úÖ –í—Å–µ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã
   - ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
   - ‚ö†Ô∏è Dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–º–µ—é—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

3. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
   - ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm update`
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npm audit` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
   - ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Dependabot

## –°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

- ‚úÖ **–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**
- ‚úÖ **–í—Å–µ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã**
- ‚úÖ **–ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- ‚ö†Ô∏è **Dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–º–µ—é—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)**

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2024-12-XX  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production
