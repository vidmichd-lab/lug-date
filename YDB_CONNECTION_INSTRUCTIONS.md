# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –∫ YDB

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. **–û–±–Ω–æ–≤–ª–µ–Ω –ø—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤ .env:**
   - –°—Ç–∞—Ä—ã–π: `/ru-central1/b1g6a1tnrohoeas9v0k6/etn8n7ptmkui9808eo6b`
   - –ù–æ–≤—ã–π: `/ru-central1/b1g6a1tnrohoeas9v0k6/etnbi9hemleeobirfbrv` ‚úÖ

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞:**
   - Endpoint: `grpcs://ydb.serverless.yandexcloud.net:2135` ‚úÖ
   - Database: `/ru-central1/b1g6a1tnrohoeas9v0k6/etnbi9hemleeobirfbrv` ‚úÖ
   - Service Account Key: `yc-service-account-key.json` ‚úÖ

3. **Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω** —Å –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π ‚úÖ

## ‚ö†Ô∏è –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ YDB –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** - —Ç–∞–π–º–∞—É—Ç 30-60 —Å–µ–∫—É–Ω–¥.

## üîç –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ü—Ä–∞–≤–∞ Service Account –Ω–∞ –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

**–í–∞–∂–Ω–æ:** Service Account –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ **–Ω–æ–≤—É—é** –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Yandex Cloud Console](https://console.cloud.yandex.ru/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **YDB** ‚Üí **Databases**
3. –ù–∞–π–¥–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö: `etnbi9hemleeobirfbrv`
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Access control** –∏–ª–∏ **IAM**
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Service Account `ajer4q84m7bno0lp0ucq` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞:
   - `ydb.editor` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –∏–ª–∏ `ydb.admin`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ YDB

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–∞:
1. Yandex Cloud Console ‚Üí **YDB** ‚Üí **Databases**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `etnbi9hemleeobirfbrv` –≤ —Å—Ç–∞—Ç—É—Å–µ **Active**

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ endpoint

Endpoint –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω:
- `grpcs://ydb.serverless.yandexcloud.net:2135`

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ Service Account (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. Yandex Cloud Console ‚Üí **YDB** ‚Üí **Databases**
2. –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `etnbi9hemleeobirfbrv`
3. **Access control** ‚Üí **Add member**
4. –í—ã–±–µ—Ä–∏—Ç–µ Service Account: `ajer4q84m7bno0lp0ucq`
5. –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª—å: **YDB Editor** –∏–ª–∏ **YDB Admin**
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IAM —Ç–æ–∫–µ–Ω

–ï—Å–ª–∏ –µ—Å—Ç—å IAM —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ YDB:

1. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   YDB_TOKEN_DEV=–≤–∞—à_iam_—Ç–æ–∫–µ–Ω
   ```

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç—å

–ï—Å–ª–∏ –µ—Å—Ç—å firewall –∏–ª–∏ VPN:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 2135 –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ gRPC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## üìù –û –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–ª—é—á–∞—Ö

**Access Key ID:** `YCAJ...` (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∫–ª—é—á)  
**Secret Access Key:** `YCXX...` (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)

–≠—Ç–∏ –∫–ª—é—á–∏ - –¥–ª—è **Object Storage**, –Ω–µ –¥–ª—è YDB. –î–ª—è YDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Service Account Key JSON —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

## üéØ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:**
   ```bash
   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
   ps aux | grep "tsx.*backend" | grep -v grep | awk '{print $2}' | xargs kill -9
   
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å
   cd backend && npm run dev
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
   ```bash
   npm run migrate:status
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API:**
   ```bash
   curl http://localhost:4000/api/admin/analytics/overview
   ```

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- ‚úÖ Backend –∑–∞–ø—É—â–µ–Ω
- ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (–Ω—É–∂–Ω—ã –ø—Ä–∞–≤–∞ Service Account)

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ Service Account –Ω–∞ –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ Yandex Cloud Console.


