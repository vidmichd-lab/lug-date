#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è SSH —Ç—É–Ω–Ω–µ–ª—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
# –†–æ—Å—Å–∏–π—Å–∫–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ngrok

set -e

PORT=${1:-3000}
TUNNEL_TYPE=${2:-serveo}

echo "üöÄ –ó–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è –¥–ª—è –ø–æ—Ä—Ç–∞ $PORT..."

if [ "$TUNNEL_TYPE" = "serveo" ]; then
  echo "üì° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è serveo.net (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)"
  echo "‚ö†Ô∏è  URL –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
  echo ""
  echo "–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ BotFather"
  echo ""
  ssh -R 80:localhost:$PORT serveo.net
elif [ "$TUNNEL_TYPE" = "localhost" ]; then
  echo "üì° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è localhost.run (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)"
  echo "‚ö†Ô∏è  URL –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
  echo ""
  echo "–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ BotFather"
  echo ""
  ssh -R 80:localhost:$PORT ssh.localhost.run
else
  echo "‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø —Ç—É–Ω–Ω–µ–ª—è: $TUNNEL_TYPE"
  echo "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: serveo –∏–ª–∏ localhost"
  exit 1
fi



















