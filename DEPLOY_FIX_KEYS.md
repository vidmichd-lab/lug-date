# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–ª—é—á–∞–º–∏ Object Storage

## –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ `SignatureDoesNotMatch` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ Yandex Object Storage –Ω–µ–≤–µ—Ä–Ω—ã–µ –∏–ª–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –±–∞–∫–µ—Ç—É.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ/—Å–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Yandex Cloud Console](https://console.cloud.yandex.ru/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Object Storage** ‚Üí **Service accounts**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π)
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ö–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞** ‚Üí **–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Access Key ID**
   - **Secret Access Key**

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª

–î–æ–±–∞–≤—å—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –≤ `.env`:

```env
# –î–ª—è frontend
YANDEX_STORAGE_BUCKET=dating-app-storage
YANDEX_STORAGE_ACCESS_KEY=–í–ê–®_ACCESS_KEY_ID
YANDEX_STORAGE_SECRET_KEY=–í–ê–®_SECRET_ACCESS_KEY

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è frontend
FRONTEND_STORAGE_BUCKET_DEV=dating-app-storage
FRONTEND_STORAGE_ACCESS_KEY_DEV=–í–ê–®_ACCESS_KEY_ID
FRONTEND_STORAGE_SECRET_KEY_DEV=–í–ê–®_SECRET_ACCESS_KEY
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞:
- `storage.editor` –∏–ª–∏ `storage.admin` –Ω–∞ –±–∞–∫–µ—Ç `dating-app-storage`

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
npm run test:storage
```

–ï—Å–ª–∏ —Ç–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ, –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å:

```bash
npm run deploy:frontend
npm run deploy:admin
```

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ä–∞–±–æ—á–∏–µ –∫–ª—é—á–∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –±–∞–∫–µ—Ç–∞, –º–æ–∂–Ω–æ:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±–∞–∫–µ—Ç:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
   - –û–±–Ω–æ–≤–∏—Ç–µ `.env` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏

2. **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –±–∞–∫–µ—Ç:**
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –±–∞–∫–µ—Ç –≤ Object Storage
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∫–ª—é—á–∏ –¥–ª—è —ç—Ç–æ–≥–æ –±–∞–∫–µ—Ç–∞
   - –û–±–Ω–æ–≤–∏—Ç–µ `.env`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ö–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –±–∞–∫–µ—Ç—É
- –°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–µ–π –ø–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

